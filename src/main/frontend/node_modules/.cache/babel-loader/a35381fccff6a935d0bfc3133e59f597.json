{"ast":null,"code":"import _slicedToArray from\"/home/nicolas/Documentos/Si/Practica/european_leagues/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{Button}from'primereact/button';import{ProgressSpinner}from'primereact/progressspinner';import{Dialog}from'primereact/dialog';import{useNavigate}from'react-router';import clientesService from'../../services/clientesService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ClientesListado(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),clientes=_useState2[0],setClientes=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),cargando=_useState4[0],setCargando=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),clienteActual=_useState6[0],setClienteActual=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),dialogoBorrado=_useState8[0],setDialogoBorrado=_useState8[1];var navigate=useNavigate();useEffect(function(){clientesService.buscarTodos().then(function(res){setClientes(res.data);setCargando(false);});},[dialogoBorrado]);// vincula la recarga a cambios en dialogoBorrado (para forzar la recarga despues de un borrado)\nfunction nuevoCliente(){navigate(\"nuevo\");// navega a URL para creacion de nuevo cliente\n}function editarCliente(cliente){// setClienteActual(cliente); // no necesario\nnavigate(cliente.dni);// navega a URL del cliente\n}function confirmarBorradoCliente(cliente){setClienteActual(cliente);setDialogoBorrado(true);}function borrarCliente(){clientesService.eliminar(clienteActual.dni);ocultarDialogoBorrado();}function ocultarDialogoBorrado(){setClienteActual(null);setDialogoBorrado(false);}function accionesCliente(rowData){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Button,{icon:\"pi pi-pencil\",className:\"p-button-rounded p-button-success mr-2\",onClick:function onClick(){return editarCliente(rowData);}}),/*#__PURE__*/_jsx(Button,{icon:\"pi pi-trash\",className:\"p-button-rounded p-button-danger\",onClick:function onClick(){return confirmarBorradoCliente(rowData);}})]});}var pieDialogoBorrado=/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Button,{label:\"No\",icon:\"pi pi-times\",className:\"p-button-text\",onClick:ocultarDialogoBorrado,tooltip:\"Eliminar el cliente\"}),/*#__PURE__*/_jsx(Button,{label:\"si\",icon:\"pi pi-check\",className:\"p-button-text\",onClick:borrarCliente,tooltip:\"Ver/editar el cliente\"})]});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl text-800 font-bold mb-4\",children:\"Listado de clientes\"}),cargando&&/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(ProgressSpinner,{}),\" Cargando... \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 md:mt-0 flex justify-content-end\",children:/*#__PURE__*/_jsx(Button,{label:\"Nuevo cliente\",icon:\"pi pi-plus\",className:\"p-button-lg\",onClick:nuevoCliente,tooltip:\"Crear un nuevo cliente\",tooltipOptions:{position:'bottom'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"surface-card p-4 border-round shadow-2\",children:/*#__PURE__*/_jsxs(DataTable,{value:clientes,responsiveLayout:\"scroll\",children:[/*#__PURE__*/_jsx(Column,{field:\"dni\",header:\"DNI\"}),/*#__PURE__*/_jsx(Column,{field:\"nombre\",header:\"Nombre\"}),/*#__PURE__*/_jsx(Column,{field:\"direccion.localidad\",header:\"Localidad\",sortable:true}),/*#__PURE__*/_jsx(Column,{field:\"direccion.codigoPostal\",header:\"C\\xF3digo Postal\"}),/*#__PURE__*/_jsx(Column,{field:\"direccion.provincia\",header:\"Provincia\",sortable:true}),/*#__PURE__*/_jsx(Column,{field:\"direccion.telefono\",header:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(Column,{body:accionesCliente})]})}),/*#__PURE__*/_jsx(Dialog,{visible:dialogoBorrado,style:{width:'450px'},header:\"Confirm\",modal:true,footer:pieDialogoBorrado,onHide:ocultarDialogoBorrado,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex align-items-center justify-content-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"pi pi-exclamation-triangle mr-3\",style:{fontSize:'2rem'}}),clienteActual&&/*#__PURE__*/_jsxs(\"span\",{children:[\"Confirmar el borrado de \",/*#__PURE__*/_jsx(\"b\",{children:clienteActual.nombre}),\"?\"]})]})})]});}","map":{"version":3,"sources":["/home/nicolas/Documentos/Si/Practica/european_leagues/src/main/frontend/src/components/clientes/clientesListado.js"],"names":["React","useState","useEffect","DataTable","Column","Button","ProgressSpinner","Dialog","useNavigate","clientesService","ClientesListado","props","clientes","setClientes","cargando","setCargando","clienteActual","setClienteActual","dialogoBorrado","setDialogoBorrado","navigate","buscarTodos","then","res","data","nuevoCliente","editarCliente","cliente","dni","confirmarBorradoCliente","borrarCliente","eliminar","ocultarDialogoBorrado","accionesCliente","rowData","pieDialogoBorrado","position","width","fontSize","nombre"],"mappings":"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","sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { Button } from 'primereact/button';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { Dialog } from 'primereact/dialog';\n\n\nimport { useNavigate } from 'react-router';\n\nimport clientesService from '../../services/clientesService';\n\nexport default function ClientesListado(props) {\n\n    const [clientes, setClientes] = useState(null);\n    const [cargando, setCargando] = useState(true);\n    const [clienteActual, setClienteActual] = useState(null);\n    const [dialogoBorrado, setDialogoBorrado] = useState(false);\n\n    let navigate = useNavigate();\n\n\n    useEffect(() => {\n        clientesService.buscarTodos().then(res => {\n            setClientes(res.data);\n            setCargando(false);\n        });\n    }, [dialogoBorrado]); // vincula la recarga a cambios en dialogoBorrado (para forzar la recarga despues de un borrado)\n\n\n    function nuevoCliente() {\n        navigate(\"nuevo\"); // navega a URL para creacion de nuevo cliente\n    }\n\n    function editarCliente(cliente) {\n        // setClienteActual(cliente); // no necesario\n        navigate(cliente.dni); // navega a URL del cliente\n    }\n\n    function confirmarBorradoCliente(cliente) {\n        setClienteActual(cliente);\n        setDialogoBorrado(true);\n    }\n\n    function borrarCliente() {\n        clientesService.eliminar(clienteActual.dni);\n        ocultarDialogoBorrado();\n    }\n\n    function ocultarDialogoBorrado() {\n        setClienteActual(null);\n        setDialogoBorrado(false);\n    }\n\n    function accionesCliente(rowData) {\n        return (\n            <React.Fragment>\n                <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success mr-2\" onClick={() => editarCliente(rowData)} />\n                <Button icon=\"pi pi-trash\" className=\"p-button-rounded p-button-danger\" onClick={() => confirmarBorradoCliente(rowData)} />\n            </React.Fragment>\n        );\n    }\n\n\n    const pieDialogoBorrado = (\n        <React.Fragment>\n            <Button label=\"No\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={ocultarDialogoBorrado} tooltip=\"Eliminar el cliente\" />\n            <Button label=\"si\" icon=\"pi pi-check\" className=\"p-button-text\" onClick={borrarCliente} tooltip=\"Ver/editar el cliente\"/>\n        </React.Fragment>\n    );\n    return (\n        <div>\n            <div className=\"text-3xl text-800 font-bold mb-4\">Listado de clientes</div>\n\n            \n            {cargando && <div> <ProgressSpinner /> Cargando... </div>}\n\n            <div className=\"mt-3 md:mt-0 flex justify-content-end\">\n                <Button label=\"Nuevo cliente\" icon=\"pi pi-plus\" className=\"p-button-lg\" onClick={nuevoCliente} tooltip=\"Crear un nuevo cliente\" tooltipOptions={{position: 'bottom'}} />\n            </div>\n\n            <div className=\"surface-card p-4 border-round shadow-2\">\n                <DataTable value={clientes} responsiveLayout=\"scroll\">\n                    <Column field=\"dni\" header=\"DNI\"></Column>\n                    <Column field=\"nombre\" header=\"Nombre\"></Column>\n                    <Column field=\"direccion.localidad\" header=\"Localidad\" sortable />\n                    <Column field=\"direccion.codigoPostal\" header=\"Código Postal\" />\n                    <Column field=\"direccion.provincia\" header=\"Provincia\" sortable />\n                    <Column field=\"direccion.telefono\" header=\"Teléfono\" />\n                    <Column body={accionesCliente} />\n                </DataTable>\n            </div>\n\n            <Dialog visible={dialogoBorrado} style={{ width: '450px' }} header=\"Confirm\" modal\n                footer={pieDialogoBorrado} onHide={ocultarDialogoBorrado}>\n                <div className=\"flex align-items-center justify-content-center\">\n                    <i className=\"pi pi-exclamation-triangle mr-3\" style={{ fontSize: '2rem' }} />\n                    {clienteActual && <span>Confirmar el borrado de <b>{clienteActual.nombre}</b>?</span>}\n                </div>\n            </Dialog>\n\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}